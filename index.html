<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scepter</title>
</head>
<body>
    <h1></h1>
    <main>
        <ul>
        </ul>
        <button id="newEntryBtn">New entry</button>
    </main>

    <script>
        const titleNode = document.querySelector('h1');
        titleNode.innerText = (new Date()).toString();

        const entries = [
            {
                title: "Hello, world",
                completed: false,
                rank: 100,
            },
            {
                title: "Let's do this",
                completed: true,
                rank: 200,
            },
        ]

        const ul = document.querySelector('ul')

        // Add initial entries
        entries.forEach(addEntry)

        // Attach event listener to newEntryBtn
        document.getElementById('newEntryBtn').addEventListener('click', event => {
            const lastRank = parseInt(entries.slice(-1) && entries.slice(-1).rank)

            const appendedNode = addEntry({
                title: '',
                completed: false,
                rank: lastRank ? lastRank + 100 : 0,
            })

            appendedNode.querySelector('[type="text"]').focus()
        })

        // Creates a new <li> and appends it to the list.
        // Returns the new appended node.
        function addEntry({ title, completed, rank }) {
            const el = document.createElement('li')
            el.innerHTML = `
                <input type="checkbox" ${completed ? 'checked' : ''} />
                <input type="text" value="${title}" />
            `
            el.querySelector('[type="checkbox"]').addEventListener('change', event => {
                const v = event.target.value

            })

            return ul.appendChild(el)
        }
    </script>
    <link rel="stylesheet" href="style.css">
</body>
</html>